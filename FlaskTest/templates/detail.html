{% extends "master.html" %}
{% block main_content %}
<div class="container py-5">
  {% if product %}
  <!-- expose the product as JSON for Vue (safe) -->
  <script id="product-json" type="application/json">{{ product|tojson }}</script>

  <div class="row align-items-start">
    <!-- Image -->
    <div class="col-12 col-md-6 mb-4 text-center">
      <img src="{{ product['image'] }}" alt="{{ product['title'] }}"
           class="img-fluid product-img">
    </div>

    <!-- Details -->
    <div class="col-12 col-md-6">
      <h1 class="h4 mb-2">{{ product['title'] }}</h1>
      <p class="text-muted mb-1">{{ product['category'] }}</p>
      <p class="h5 text-danger font-weight-bold mb-3">$ {{ '%.2f' % product['price'] }}</p>

      <p class="text-muted">{{ product['description'] }}</p>

      <label for="quantity" class="small text-muted">Quantity</label>
      <div class="input-group mb-3" style="max-width:220px">
        <div class="input-group-prepend">
          <button class="btn btn-outline-secondary" type="button"
                  @click="quantity = Math.max(1, (quantity||1) - 1)">âˆ’</button>
        </div>
        <input id="quantity" type="number" v-model.number="quantity" min="1"
               class="form-control text-center">
        <div class="input-group-append">
          <button class="btn btn-outline-secondary" type="button"
                  @click="quantity = Number(quantity||1) + 1">+</button>
        </div>
      </div>

      <button class="btn btn-primary btn-lg btn-block mt-2"
              @click="addToCart({{ product }}, quantity)">
        Add to Cart
      </button>
    </div>
  </div>
  {% else %}
    <div class="alert alert-warning">Product not found.</div>
  {% endif %}
</div>
{% endblock %}
